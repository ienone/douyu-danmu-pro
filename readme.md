# 斗鱼弹幕助手

一个为斗鱼直播平台开发的浏览器用户脚本，提供弹幕模板自动补全、快捷键选择等功能，增强用户的弹幕输入体验。

## 功能演示
<https://github.com/user-attachments/assets/3675c18d-6ef1-406d-ab84-3d1ecfb45dd2>

## 主要功能

*   弹幕智能补全: 在聊天输入框输入时，根据关键字自动匹配并显示相关的弹幕模板
*   胶囊式候选项: 在聊天区域以横向胶囊列表展示候选项，融入斗鱼UI(尚未适配日间模式😇😇😇)
*   全键盘操作:
    *  1. 正常输入模式: 打出关键字如‘niko’‘三楼’
    *  2. 如果弹幕库中有匹配到的话，会在输入框上方显示几个候选项
    *  3. 点击 `↑` 键进入选择模式
    *  4. 点击 `←` / `→` 在候选项之间导航
    *  5. 点击 `Enter` 选择并填充弹幕(连点两下`Enter`就是直接发送弹幕)
    *  6. 点击 `↓` 退出选择模式回到正常输入模式，或 点击 `Esc` 关闭候选框
    *  在`2.`之后也可以直接鼠标点击选择候选项填充到输入框
*   长文本预览: 当鼠标悬停或键盘选择到内容过长的候选项时，会显示一个悬浮框来展示完整内容。
   
## TODO
- [ ] 适配日夜模式，处理日间模式下的小bug
- [ ] 加入设置面板
    - [ ] 允许自定义键位
    - [ ] 手动更新弹幕库功能
    - [ ] 自定义添加弹幕
- [ ] 优化搜索功能，支持多词搜索
- [ ] 适配全屏下的弹幕发送框
- [ ] 优化候选项呈现样式
- [ ] 支持分直播间弹幕库
 
---

## 项目构建

`git clone`项目到本地,`npm install`安装依赖
- `npm run dev`启动开发服务器,在浏览器中进行调试.
- `npm run build`构建项目,在`dist`目录下会生成`douyu-danmu-pro.user.js`用户脚本文件,将其导入到Tampermonkey等用户脚本管理器中即可使用.

## 技术栈

*   语言: JavaScript + CSS3 
*   数据存储: IndexedDB，用于在本地高效地存储和管理用户的弹幕模板。
*   运行环境: 浏览器用户脚本管理器，如 [Tampermonkey](https://www.tampermonkey.net/)
